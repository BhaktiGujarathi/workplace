<apex:page standardController="Opportunity" extensions="DealOfferController">
    
    <style type="text/css">
        .pbTitle {
            white-space: nowrap;
        }
        
        .custPopup {
            background-color: white;
            border-width: 2px;
            border-style: solid;
            z-index: 9999;
            left: 50%;
            padding:10px;
            position: absolute;            
            width: 500px;
            margin-left: -250px;
            top:100px;
        }

        .popupBackground {
            background-color:black;
            opacity: 0.2;
            filter: alpha(opacity = 20);
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: 9998;
        }
    </style>  

    <apex:form id="frmId" >
        
        <apex:pageBlock id="pbid" >
            
            <apex:pageBlockSection title="Existing Open Stips"  columns="1"  >
                
                <apex:outputLabel value="No Existing Stips" rendered="{!lstExistingStip.size<=0}" ></Apex:outputLabel>
                
                <apex:pageBlockTable value="{!lstExistingStip}" var="s" align="center" rendered="{!lstExistingStip.size>0}">  
                    <apex:column width="5%"> 
                        <apex:facet name="header">
                            <apex:inputCheckbox onclick="checkBoxSelection(this,'existingStipsClass')"/>
                        </apex:facet> 
                        <apex:inputCheckbox styleClass="existingStipsClass" value="{!s.selected}"/>
                    </apex:column>                        
            
                    <apex:column width="45%" headerValue="{!$ObjectType.McaApp__Stips__c.fields.Name.label}">
                        <apex:inputField value="{!s.objStip.Name}"/>
                    </apex:column>
            
                    <apex:column width="50%" headerValue="{!$ObjectType.McaApp__Stips__c.fields.Notes__c.label}">
                        <apex:inputField value="{!s.objStip.Notes__c}"/>
                    </apex:column>                   
                </apex:pageBlockTable>
            </apex:pageBlockSection>
            
            <br/><br/>

                <apex:pageBlockSection title="Default Stips" columns="1" >
                    
                    <apex:outputLabel value="No Default Stips" rendered="{!defaultStips.size <= 0}" ></Apex:outputLabel>
                    
                    <apex:pageBlockTable value="{!defaultStips}" var="s" rendered="{!defaultStips.size > 0}">
                        <apex:column width="5%" headerValue="Select">
                            <apex:facet name="header">
                                <apex:inputCheckbox onclick="checkBoxSelection(this,'defaultStipsSelectClass')"/>
                            </apex:facet> 
                            <apex:inputCheckbox styleClass="defaultStipsSelectClass" value="{!s.selected}"/>
                        </apex:column>
                    
                        <apex:column width="30%" headerValue="Name">
                            <apex:outputField value="{!s.objStip.Name}"/>
                        </apex:column>
                    
                        <apex:column width="30%"  headerValue="Notes">
                            <apex:outputField value="{!s.objStip.Notes__c}"/>
                        </apex:column>
                    
                        <apex:column width="35%" headerValue="Type">
                            <apex:outputField value="{!s.objStip.Type__c}"/>
                        </apex:column>              
                    </apex:pageBlockTable>

                </apex:pageBlockSection>

            <br /><br />            
            
            <apex:outputPanel id="veriListId">
                
                <apex:pageBlockSection title="Add Stips" columns="1" >
                    
                    <apex:outputLabel value="No Stips to Add" rendered="{!lstStipMaster.size<=0}" ></Apex:outputLabel>
                    
                    <apex:pageBlockTable value="{!lstStipMaster}" var="s" rendered="{!lstStipMaster.size>0}">
                        <apex:column width="5%" headerValue="Select">
                            <apex:facet name="header">
                                <apex:inputCheckbox onclick="checkBoxSelection(this,'addStipsSelectClass')"/>
                            </apex:facet> 
                            <apex:inputCheckbox styleClass="addStipsSelectClass" value="{!s.selected}"/>
                        </apex:column>
                    
                        <apex:column width="30%" headerValue="Name">
                            <apex:outputField value="{!s.objStip.Name}"/>
                        </apex:column>
                    
                        <apex:column width="30%"  headerValue="Notes">
                            <apex:outputField value="{!s.objStip.Notes__c}"/>
                        </apex:column>
                    
                        <apex:column width="35%" headerValue="Type">
                            <apex:outputField value="{!s.objStip.Type__c}"/>
                        </apex:column>              
                    </apex:pageBlockTable>
                </apex:pageBlockSection>

            </apex:outputPanel>

            <apex:pageBlockButtons >
                <apex:commandButton value="Back" action="{!backTostep1}"/>              
                <apex:commandButton value="New Stip" action="{!newStip}"/>              
                <apex:commandButton value="Cancel" action="{!Cancel}"/>
                <apex:commandButton value="Next" action="{!stipDone}"/>
            </apex:pageBlockButtons>
        </apex:pageBlock>
         
        <apex:outputPanel id="panelId" styleClass="popupBackground" layout="block" rendered="{!displayPopUp}" />
            <apex:outputPanel styleClass="custPopup" layout="block" rendered="{!displayPopUp}">            
                <apex:pageBlock title="New Stip" >
                    <apex:pageBlockSection columns="1" >                               
                        <apex:inputField value="{!objNewStip.Name}" required="true"/>                            
                        <apex:inputField value="{!objNewStip.Type__c}"/>
                        <apex:inputField value="{!objNewStip.Notes__c}" style="width: 253px;height: 40px;"/>            
                    </apex:pageBlockSection>
                    <apex:pageBlockButtons location="bottom">
                        <apex:commandButton value="Save" action="{!stipSaveAndClose}" />
                        <apex:commandButton value="Cancel" action="{!stipCancelNew}" immediate="true" />
                    </apex:pageBlockButtons>
                </apex:pageBlock>                                    
        </apex:outputPanel>         

    </apex:form>
</apex:page>