<apex:page controller="TitleDeedProcess" sidebar="false" showHeader="false" standardstylesheets="false">
<html>
    <head>
        <title>Dashboard</title>
        <meta charset="utf-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"/>
        <link rel='shortcut icon' href='favicon.ico' type='image/x-icon'/>
        <apex:stylesheet value="{!URLFOR($Resource.PortalAssets, 'assets/css/bootstrap.min.css')}"/>
        <apex:stylesheet value="{!URLFOR($Resource.PortalAssets, 'assets/css/style.css')}"/>
        <apex:stylesheet value="{!URLFOR($Resource.PortalAssets, 'assets/css/button.css')}"/>
        <apex:stylesheet value="{!URLFOR($Resource.PortalAssets, 'assets/css/bootstrap-datepicker.min.css')}"/>
        <apex:stylesheet value="{!URLFOR($Resource.PortalAssets, 'assets/css/checkbox.css')}"/>
        <apex:stylesheet value="{!URLFOR($Resource.PortalAssets, 'assets/css/jquery.gridster.min.css')}"/>
        <apex:stylesheet value="{!URLFOR($Resource.PortalAssets, 'assets/css/demo.css')}"/>
        

        <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Raleway"/>
        <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:100,200,300,400,500,600,700,800"/>

        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"/>

        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css"/>

    </head>
    <body>
    <apex:form >
        <!---------------------- Top Navbar ------------------------>        
        <nav class="navbar navbar-default navbar-fixed-top">
            <div class="container-fluid">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span> 
                    </button>
                    <a class="navbar-brand" href="#">Demac</a>
                </div>
                <div class="collapse navbar-collapse" id="myNavbar">
                    <ul class="nav navbar-nav navbar-right">
                        <li class="top-notification-box">
                            <a href="#" class="dropdown-toggle active" data-toggle="dropdown">
                                <i class="fa fa-bell" aria-hidden="true"></i>
                                <span class="label notification">10</span>
                            </a>
                        </li>
                        <li class="top-notification-box">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                <i class="fa fa-envelope" aria-hidden="true"></i>
                            </a>
                        </li>
                        <li class="top-notification-box">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                <i class="fa fa-calendar" aria-hidden="true"></i>
                            </a>
                        </li>
                        <li class="top-profile-box dropdown">
                            <a class="dropdown-trigger dropdown-toggle" data-toggle="dropdown">
                                <img src="assets/img/user.png" class="top-user-image" />
                                <span class="top-user-name">Jane Doe</span>
                            </a>
                            <ul class="dropdown-menu site-dropdown user-dropdown">
                                <li><a href="#" class="wave-button"> View Profile</a></li>
                                <li><a href="#" class="wave-button">Settings</a></li>
                                <li><a href="#" class="wave-button">Logout</a></li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
        <!-- Sidebar Menu -->
        <div class="nav-side-menu">
            <div class="brand">Brand Logo</div>
            <i class="fa fa-bars fa-2x toggle-btn" data-toggle="collapse" data-target="#menu-content"></i>

            <div class="menu-list">

                <ul id="menu-content" class="menu-content collapse out">
                    <li><a href="transfer-ownership.html"><i class="fa fa-dashboard fa-lg"></i> Home</a></li>
                    <li  data-toggle="collapse" data-target="#customer" class="collapsed active">
                        <a><i class="fa fa-delicious" aria-hidden="true"></i> Customer SR's <span class="arrow"></span></a>
                    </li>
                    <ul class="sub-menu collapse" id="customer">
                        <li><a href="transfer-ownership.html">Transfer Ownership</a></li>
                        <li  data-toggle="collapse" data-target="#products" class="collapsed">
                            <a>Contact SR <span class="arrow"></span></a>
                        </li>
                        <ul class="sub-menu collapse" id="products">
                            <li><a href="primary-details.html">Primary Details</a></li>
                            <li><a href="secondary-details.html">Secodnary Details</a></li>
                            <li><a href="name-nationality.html">Name/ Nationality</a></li>
                            <li><a href="update-passport.html">Passport Details</a></li>
                        </ul>
                        <li><a href="additional-parking.html"> Additional Parking</a></li>
                        <li><a href="complaint.html">Complaint</a></li>
                        <li><a href="early-handover.html">Early Handover</a></li>
                        <li><a href="furniture-package.html">Furniture Package</a></li>
                        <li><a href="rental-pool.html">Rental Pool</a></li>
                        <li class="active"><a href="title-deed.html">Title Deed</a></li>
                        <li><a href="utility-registration.html">Utility Registeration</a></li>
                        <li><a href="handover.html">Handover</a></li>
                        <li><a href="proof-of-payment.html">Proof of Payment</a></li>
                    </ul>
                </ul>
            </div>
        </div>


        <!---------------------- Main content ------------------------>
        <section class="main-content-section">

            <div class="wrapper">

                <div class="row">

                    <div class="col-md-8">
                        <apex:outputPanel id="instructionStep1" rendered="{!blnStep1}">
                        <section id="step1">
                            <div class="well">
                                <h6>Step 1</h6>
                                <h4>
                                    Instructions
                                    <div class="pull-right">
                                         <apex:commandButton styleClass="btn btn-sm btn-success" action="{!nextInstruction}"  value="Next" id="nextButton"/>
                                    </div>
                                </h4>


                                <div class="row">
                                    <div class="col-lg-8">
                                        <ol>
                                            <li>Select the unit for which Title Deed has to be issued</li>
                                            <li>Pay outstanding dues. Title Deed Service Request can be submitted only after clearing all dues</li>
                                            <li>Select mode of collection</li>
                                            <li>Generate CRF</li>
                                            <li>Attach Mandatory documents</li>
                                            <li>Submit</li>
                                        </ol>
                                    </div>
                                </div>
                            </div>
                        </section>
             </apex:outputPanel>

        <apex:outputPanel id="DRSteps2">
                    <apex:outputPanel rendered="{!blnStep2}">
                        <section id="step2">
                            <div class="well">
                                <h6>Step 2</h6>
                                <h4>
                                    Draft Request
                                    <div class="pull-right">
                                        <apex:commandButton styleClass="btn btn-sm btn-success" action="{!SaveAndContinueDR}" value="Save & Continue" id="DRButton"/>
                                    </div>
                                </h4>

                                <div class="row">
                                    <div class="col-lg-5">
                                        <div class="form-group">
                                            <label>Select Unit</label>
                                            <apex:selectList styleClass="form-control formSelect" value="{!strSelectedUnit}" multiselect="false" size="1">
                                               <apex:actionSupport event="onchange" action="{!autoPopulateBUDetails}" rerender="radioIcon,duesID"/>
                                               <apex:selectOptions value="{!lstUnits}"/>
                                            </apex:selectList>
                                        </div>
                                    </div>

                                    <div class="col-lg-5">
                                        <div class="form-group">
                                            <label>Handed Over</label>
                                            <div class="row">
                                                <div class="col-lg-4">
                                                         <apex:selectRadio value="{!strHandedOver}" id="radioIcon">
                                                         <apex:selectOptions value="{!resHandedOver}"/>
                                                        </apex:selectRadio> 
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-lg-5">
                                        <div class="form-group">
                                            <label>Mode of Collection</label>
                                            <apex:selectList styleClass="form-control formSelect" value="{!strSelectedMode}" multiselect="false" size="1">
                                                <apex:selectOptions value="{!lstModes}"/>
                                            </apex:selectList>
                                        </div>
                                    </div>
                                </div>

                                <br />
                                <h5>You are required to clear all outstanding before requesting for Title Deed</h5>
                                <apex:outputPanel id="duesID">
                                <table class="table" >
                                    <thead>
                                        <tr>
                                            <th width="70%">Payment Type</th>
                                            <th>Amount Due</th>

                                        </tr>
                                    </thead>
                                    <tbody >
                                        <tr>
                                            <td>Overdues/dues towards Service Charges</td>
                                            <td>{!strOverdues}</td>
                                        </tr>
                                        <tr>
                                            <td>Penalties/ Late payment fee on Service Charges</td>
                                            <td>{!strPenalties}</td>
                                        </tr>
                                        <tr>
                                            <td>Admin Fee for Assignment</td>
                                            <td>{!strAdminFee}</td>
                                        </tr>
                                        <tr>
                                            <td>Other Dues</td>
                                            <td>{!strOtherDues}</td>
                                        </tr>
                                        <tr>
                                            <td>Total amount</td>
                                            <td>{!strTotalAmt}</td>
                                        </tr>
                                    </tbody>
                                </table>
                           </apex:outputPanel>
                            </div>
                        </section>
                        </apex:outputPanel>
                        </apex:outputPanel>

                        <apex:outputPanel id="UDStep3" rendered="{!blnStep3}">
                        <section id="step3">
                            <div class="well">
                                <h6>Step 3</h6>
                                <h4>
                                    Upload Documents
                                    <div class="pull-right">
                                    <apex:commandButton styleClass="btn btn-sm btn-success" action="{!uploadDocuments}" value="Save & Continue"  id="uploadDocument"/>
<!--                                         <button id="uploadDocument" class="btn btn-sm btn-success" onclick="return uploadTheFile(event);">Save And Continue</button> -->
                                    </div>
                                </h4>

                                <div class="row">

                                    <div class="col-lg-4 col-md-6 col-xs-12 text-center">
                                        <div class="fileupload fileupload-new" data-provides="fileupload">
                                            <span class="btn btn-primary btn-file">
                                                <span class="fileupload-new"><i class="fa fa-file-pdf-o" aria-hidden="true"></i><br/>Select file</span>
                                                <span class="fileupload-exists"><i class="fa fa-file-pdf-o" aria-hidden="true"></i><br/>Change</span>
                                                <apex:inputFile value="{!attachment.body}" filename="{!attachment.name}" id="TDForm"/>
                                            </span>
                                            <div>
                                                <span class="fileupload-preview"></span>
                                                <a href="#" class="close fileupload-exists" data-dismiss="fileupload" style="float: none">×</a>
                                            </div>
                                        </div>
                                        <label>Customer Signed Form</label>
                                    </div>
                                    <div class="col-lg-4 col-md-6 col-xs-12 text-center">
                                        <div class="fileupload fileupload-new" data-provides="fileupload">
                                            <span class="btn btn-primary btn-file">
                                                <span class="fileupload-new"><i class="fa fa-file-text" aria-hidden="true"></i><br/>Select file</span>
                                                <span class="fileupload-exists"><i class="fa fa-file-pdf-o" aria-hidden="true"></i><br/>Change</span>
                                                <apex:inputFile value="{!attachment1.body}" filename="{!attachment1.name}" id="otherDoc"/>
                                            </span>
                                            <div>
                                                <span class="fileupload-preview"></span>
                                                <a href="#" class="close fileupload-exists" data-dismiss="fileupload" style="float: none">×</a>
                                            </div>
                                        </div>
                                        <label>Others</label>
                                    </div>
                                </div>
                            </div>
                        </section>
                </apex:outputPanel>


                    <apex:outputPanel id="summaryStep4" rendered="{!blnStep4}">
                        <section id="step4">
                            <div class="well summaryWell">
                                <h6>Step 4</h6>
                                <h4>
                                    Summary
                                </h4>

                                <div class="row">
                                    <div class="col-lg-9">
                                        <h5>Your Request for Utility Registration has been submitted.</h5>
                                        <p>The reference number for your Service Request is <a class="ref-no">#TD{!strCaseNumber}</a>.</p>
                                        <p>If any more details are required our Customer Service Executive will contact you.</p>
                                        <p>You will receive an email and notification on completion of the Service Request.</p>
                                        <br />
                                        <p>Thankyou<br/> DAMAC Customer Service Team
                                        </p>
                                    </div>
                                </div>


                            </div>
                        </section>
              </apex:outputPanel>
                    </div>


                    <div class="col-md-4">

                        <div class="well sideBarFixed">
                            <h6>Process Step list</h6>
                            <h4>
                                Title Deed<br/><p>We know it's really long, but with all this you'll be bulletproff safe!</p>
                            </h4>
                            <ul class="StepProgress">
                                <li id="step1css" class="StepProgress-item {!strFirst}"><a class="pageScroll" href="#step1"/>Instructions</li>
                                <li id="step2css" class="StepProgress-item {!strSecond}"><a class="pageScroll" href="#step2"/>Draft Request</li>
                                <li id="step3css" class="StepProgress-item {!strThird}"><a class="pageScroll" href="#step3"/>Upload Documents</li>
                                <li id="step4css" class="StepProgress-item {!strFourth}"><a class="pageScroll" href="#step4"/>Summary</li>
                            </ul>

                        </div>
                    </div>
                </div>

            </div>

        </section>

</apex:form>
        <apex:includeScript value="{!URLFOR($Resource.PortalAssets, 'assets/js/jquery.js')}"/>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
        <apex:includeScript value="{!URLFOR($Resource.PortalAssets, 'assets/js/bootstrap-datepicker.min.js')}"/>
        <apex:includeScript value="{!URLFOR($Resource.PortalAssets, 'assets/js/main.js')}"/>
        <apex:includeScript value="{!URLFOR($Resource.PortalAssets, 'assets/js/button.js')}"/>
        <apex:includeScript value="{!URLFOR($Resource.PortalAssets, 'assets/js/checkbox.js')}"/>
        <apex:includeScript value="{!URLFOR($Resource.PortalAssets, 'assets/js/upload.js')}"/>
        <apex:includeScript value="{!URLFOR($Resource.PortalAssets, 'assets/js/ease.js')}"/>
        
        <script>

            $(document).ready(function () {
                //smooth scroll
                $('a.pageScroll').bind('click', function (event) {

                    var $anchor = $(this);
                    $('html, body').stop().animate({
                        scrollTop: $($anchor.attr('href')).offset().top - 85
                    }, 1000, 'easeInOutExpo');

                    event.preventDefault();
                });

                //Add Address Input on Button click ends Here
                var max_fields = 10; //maximum input boxes allowed
                var wrapper = $(".input_fields_wrap"); //Fields wrapper
                var add_button = $(".add_field_button"); //Add button ID

                var x = 1; //initlal text box count
                $(add_button).click(function (e) { //on add input button click
                    e.preventDefault();
                    if (x < max_fields) { //max input box allowed
                        x++; //text box increment
                        $(wrapper).append('<div class="newInput"><input style="margin:3% 0% 3% 0%; " type="text" class="form-control formText" name="mytext[]"/><a href="#" class="remove_field">Remove</a></div>'); //add input box
                    }
                });

                $(wrapper).on("click", ".remove_field", function (e) { //user click on remove text
                    e.preventDefault();
                    //$(this).parent('div').remove();
                    $("div.newInput").remove();
                    x--;
                })

                //Date Picker
                $('.well input.datepicker').datepicker({
                });
            });
        </script>


    </body>
</html>
</apex:page>