<apex:component controller="assignmentRPProcessCREController" allowDML="true">
    <html lang="en">
<head>
<title>Dashboard</title>
<meta charset="utf-8" />
<meta name="viewport"
    content="width=device-width, initial-scale=1, user-scalable=no" />

<apex:stylesheet value="{!URLFOR($Resource.PortalAssets, '/assets/css/bootstrap.min.css')}" />
<apex:stylesheet value="{!URLFOR($Resource.PortalAssets, '/assets/css/bootstrap-chosen.css')}" />
<apex:stylesheet value="{!URLFOR($Resource.PortalAssets, '/assets/css/bootstrap-datepicker.min.css')}" />
<apex:stylesheet value="{!URLFOR($Resource.PortalAssets, '/assets/css/bootstrap-multiselect.css')}" />
<apex:stylesheet value="{!URLFOR($Resource.PortalAssets, '/assets/css/diff-theme.css')}" />
<apex:stylesheet value="{!URLFOR($Resource.PortalAssets, '/assets/css/fileinput.min.css')}" />
<apex:stylesheet value="{!URLFOR($Resource.PortalAssets, '/assets/css/multiple-select.css')}" />
<apex:stylesheet value="{!URLFOR($Resource.PortalAssets, '/assets/css/style.css')}" />

<link rel='shortcut icon' href='favicon.ico' type='image/x-icon'/ >
<link rel="stylesheet"
    href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" />
<!--<link rel="stylesheet" href="assets/css/style.css"/> -->
<!--<link rel="stylesheet" href="assets/css/bootstrap-datepicker.min.css"/> -->
<link rel="stylesheet" type="text/css"
    href="https://fonts.googleapis.com/css?family=Raleway" />
<link rel="stylesheet" type="text/css"
    href="https://fonts.googleapis.com/css?family=Roboto:100,200,300,400,500,600,700,800" />
<link href="https://fonts.googleapis.com/icon?family=Material+Icons"
    rel="stylesheet" />
<link rel="stylesheet"
    href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" />
</head>
<style>
.errorStyle, .errorMsg, .importantWarning, .pbBody .errorStyle a, .pbBody .errorMsg a {
            color: #c00!important;
        }
        
        .message {
            background-color: #ffc!important;
            border-style: solid!important;
            border-width: 1px!important;
            color: #000!important;
            padding: 6px 8px 6px 6px!important;
            border-radius: 4px!important;
        }
        
        .errorM6, .errorM4, .errorM3, .errorM2, .errorS1 {
            border-color: #c00!important;
        }
        
        .confirmM3 {
            border-color: green!important;
        }
        
        .warningM3 {
            border-color: sandybrown!important;
        }
</style>
<body>
<!---------------------- Top Navbar ------------------------>        
        <nav class="navbar navbar-default navbar-fixed-top">
            <div class="container-fluid">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span> 
                    </button>
                    <a class="navbar-brand" href="#">Demac</a>
                </div>
                <div class="collapse navbar-collapse" id="myNavbar">
                    <ul class="nav navbar-nav navbar-right">
                        <li class="top-notification-box">
                            <a href="#" class="dropdown-toggle active" data-toggle="dropdown">
                                <i class="fa fa-bell" aria-hidden="true"></i>
                                <span class="label notification">10</span>
                            </a>
                        </li>
                        <li class="top-notification-box">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                <i class="fa fa-envelope" aria-hidden="true"></i>
                            </a>
                        </li>
                        <li class="top-notification-box">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                <i class="fa fa-calendar" aria-hidden="true"></i>
                            </a>
                        </li>
                        <li class="top-profile-box dropdown">
                            <a class="dropdown-trigger dropdown-toggle" data-toggle="dropdown">
                                <img src="assets/img/user.png" class="top-user-image" />
                                <span class="top-user-name">Jane Doe</span>
                            </a>
                            <ul class="dropdown-menu site-dropdown user-dropdown">
                                <li><a href="#" class="wave-button"> View Profile</a></li>
                                <li><a href="#" class="wave-button">Settings</a></li>
                                <li><a href="#" class="wave-button">Logout</a></li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
        <!-- Sidebar Menu -->
        <div class="nav-side-menu">
            <div class="brand">Brand Logo</div>
            <i class="fa fa-bars fa-2x toggle-btn" data-toggle="collapse" data-target="#menu-content"></i>

            <div class="menu-list">
                <ul id="menu-content" class="menu-content collapse out">
                    <li><a href="CRE-additional-parking.html"><i class="fa fa-dashboard fa-lg"></i> Home</a></li>
                    <li  data-toggle="collapse" data-target="#cre" class="active collapsed" >
                        <a><i class="fa fa-delicious" aria-hidden="true"></i> CRE SR's <span class="arrow"></span></a>
                    </li>
                    <ul class="sub-menu collapse in" id="cre">
                        <li><a href="CRE-additional-parking.html">Additional Parking</a></li>
                        <li><a href="CRE-aopt.html">AOPT</a></li>
                        <li><a href="CRE-bounced-cheque.html">Bounced Cheque</a></li>
                        <li><a href="CRE-funds-transfer.html">Fund Transfer</a></li>
                        <li><a href="CRE-furniture-package.html">Furniture Package</a></li>
                        <li><a href="CRE-mortgage.html">Mortgage</a></li>
                        <li><a href="CRE-penalty-waiver.html">Penalty Waiver</a></li>
                        <li><a href="CRE-proof-of-payment.html">Proof of Payment</a></li>
                        <li><a href="CRE-refunds.html">Refunds</a></li>
                        <li><a href="CRE-cocd.html">COCD</a></li>
                        <li class="active"><a href="CRE-early-handover.html">Early Handover</a></li>
                    </ul>
                </ul>
            </div>
        </div>

    <!---------------------- Main content ------------------------>
        <apex:form id="parentPanel">
        <apex:actionfunction name="fetchUnitDetails" action="{!fetchUnitDetails}" /> <!-- rerender="unitDetailsPanel,additionalInfoPanel" -->
        <section class="main-content-section">

            <div class="wrapper">

                <div class="row">

                    <div class="col-md-8">
                        <div id="errorMsg" style="color:red">{!errorMessage}</div>
                        <section id="">
                            <div class="well">
                                <h4>
                                   Rental Pool Assignment
                                </h4>

                                <div class="row">
                                    <div class="col-lg-8">
                                        <div class="form-group">
                                            <label><span style="color:red">*&nbsp;</span>Select Unit </label>
                                            <apex:selectList value="{!strSelectedUnit}"
                                                multiselect="false" size="1" 
                                                styleClass="form-control units" id="units"
                                                onchange="fetchUnitDetails();">
                                                <apex:selectOptions value="{!lstUnits}" />
                                            </apex:selectList>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-lg-8">
                                        <ul class="nav nav-pills">
                                            <li role="presentation" class="active">
                                            <a href="#plan1" data-toggle="tab" data-original-title="Plan 1" aria-expanded="true">Unit Details</a>
                                            </li>
                                            <li role="presentation">
                                            <a href="#plan2" data-toggle="tab" data-original-title="Plan 2" aria-expanded="true">Unit Flags</a>
                                            </li>
                                            <li role="presentation">
                                            <a href="#plan3" data-toggle="tab" data-original-title="Plan 3" aria-expanded="true">Unit Status</a>
                                            </li>
                                            <li role="presentation">
                                            <a href="#plan4" data-toggle="tab" data-original-title="Plan 4" aria-expanded="true">Open SRs</a>
                                            </li>
                                        </ul>



                                        <div class="tab-content">
                                            <div class="tab-pane fade active in" role="tabpanel" id="plan1">
                                                <div class="row">
                                                    <div class="col-lg-12 col-md-12 col-sm-12 filterDetails">
                                                        <apex:outputpanel id="unitDetailsPanel">
                                                        <table class="paymentDue table" cellpadding="10" width="100%">
                                                            <col width="40%"/>
                                                            <col width="60%"/>

                                                            <tbody>
                                                                <tr>
                                                                    <td><b>Project</b></td>
                                                                    <td>{!objUnit.Inventory__r.Property__r.Name}</td>
                                                                </tr>
                                                                <tr>
                                                                    <td><b>Project City</b></td>
                                                                    <td>{!objUnit.Inventory__r.Property_City__c}</td>
                                                                </tr>
                                                                <tr>
                                                                    <td><b>Bedroom Type</b></td>
                                                                    <td>{!objUnit.Inventory__r.Bedroom_Type__c}</td>
                                                                </tr>
                                                                <tr>
                                                                    <td><b>Unit Type </b><small>(Villa/High-rise)</small></td>
                                                                    <td>{!objUnit.Inventory__r.Unit_Type__c}</td>
                                                                </tr>
                                                                <tr>
                                                                    <td><b>Permitted Use</b></td>
                                                                    <td>{!objUnit.Permitted_Use__c}</td>
                                                                </tr>
                                                                <tr>
                                                                    <td><b>Ready/ Off plan</b></td>
                                                                    <td>{!objUnit.Inventory__r.Property_Status__c}</td>
                                                                </tr>
                                                                <tr>
                                                                    <td><b>Rental Pool</b></td>
                                                                    <td>{!objUnit.Rental_Pool__c}</td>
                                                                </tr>
                                                            </tbody>
                                                        </table>
                                                        </apex:outputpanel>
                                                    </div>

                                                </div>
                                            </div>
                                            <div class="tab-pane fade in" role="tabpanel" id="plan2">
                                                <div class="row">
                                                    <div class="col-lg-12 col-md-12 col-sm-12 filterDetails">
                                                        <table class="paymentDue table" cellpadding="10" width="100%">
                                                            <col width="40%"/>
                                                            <col width="60%"/>
                                                            <tbody>
                                                                <tr>
                                                                    <td><b>Dispute</b></td>
                                                                    <td>No</td>
                                                                </tr>
                                                                <tr>
                                                                    <td><b>Enforcement</b></td>
                                                                    <td>No</td>
                                                                </tr>
                                                                <tr>
                                                                    <td><b>Litigation</b></td>
                                                                    <td>No</td>
                                                                </tr>
                                                                <tr>
                                                                    <td><b>Mortgage</b></td>
                                                                    <td>No</td>
                                                                </tr>
                                                                <tr>
                                                                    <td><b>Court Case</b></td>
                                                                    <td>No</td>
                                                                </tr>
                                                            </tbody>


                                                        </table>
                                                    </div>

                                                </div>
                                            </div>
                                            <div class="tab-pane fade in" role="tabpanel" id="plan3">
                                                <div class="row">
                                                    <div class="col-lg-12 col-md-12 col-sm-12 filterDetails">
                                                        <table class="paymentDue table" cellpadding="10" width="100%">
                                                            <col width="40%"/>
                                                            <col width="60%"/>

                                                            <tbody>
                                                                <tr>
                                                                    <td><b>OQOOD Registered</b></td>
                                                                    <td>No</td>
                                                                </tr>
                                                                <tr>
                                                                    <td><b>Agreement Status</b></td>
                                                                    <td>In Progress</td>
                                                                </tr>
                                                                <tr>
                                                                    <td><b>Under Termination</b></td>
                                                                    <td>NA</td>
                                                                </tr>
                                                                <tr>
                                                                    <td><b>FTL sent</b></td>
                                                                    <td>NA</td>
                                                                </tr>
                                                                <tr>
                                                                    <td><b>EHO flag</b></td>
                                                                    <td>No</td>
                                                                </tr>
                                                                <tr>
                                                                    <td><b>HO flag</b></td>
                                                                    <td>No</td>
                                                                </tr>
                                                                <tr>
                                                                    <td><b>PCC</b></td>
                                                                    <td>No</td>
                                                                </tr>

                                                            </tbody>
                                                        </table>
                                                    </div>

                                                </div>
                                            </div>
                                            <div class="tab-pane fade  in" role="tabpanel" id="plan4">
                                                <div class="row">
                                                    <div class="col-lg-12 col-md-12 col-sm-12 filterDetails">
                                                        <table class="paymentDue table" cellpadding="10" width="100%">
                                                            <col width="40%"/>
                                                            <col width="60%"/>
                                                            <thead>
                                                                <th colspan="2">Open SRs</th>
                                                            </thead>
                                                            <tbody>
                                                                <apex:variable var="cnt" value="{!1}" />
                                                                <apex:repeat value="{!lstExistingCase}" var="case">
                                                                <tr>
                                                                    <td><b>SR {!cnt}</b></td>
                                                                    <td><a href="">{!case.CaseNumber}</a></td>
                                                                </tr>
                                                                <apex:variable var="cnt" value="{!cnt+1}" />
                                                                </apex:repeat>
                                                            </tbody>
                                                        </table>

<!--                                                         <br /> -->
<!--                                                         <table class="paymentDue table" cellpadding="10" width="100%"> -->
<!--                                                             <col width="40%"/> -->
<!--                                                             <col width="60%"/> -->
<!--                                                             <thead> -->
<!--                                                                 <th colspan="2">Closed SRs</th> -->
<!--                                                             </thead> -->
<!--                                                             <tbody> -->
<!--                                                                 <tr> -->
<!--                                                                     <td><b>SR1</b></td> -->
<!--                                                                     <td><a href="">View SR</a></td> -->
<!--                                                                 </tr> -->
<!--                                                                 <tr> -->
<!--                                                                     <td><b>SR2</b></td> -->
<!--                                                                     <td><a href="">View SR</a></td> -->
<!--                                                                 </tr> -->
<!--                                                                 <tr> -->
<!--                                                                     <td><b>SR3</b></td> -->
<!--                                                                     <td><a href="">View SR</a></td> -->
<!--                                                                 </tr> -->
<!--                                                             </tbody> -->
<!--                                                         </table> -->
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                    <div class="col-lg-4">
                                        <apex:outputpanel id="additionalInfoPanel">
                                        <h5>Additional Information</h5>
                                        <div class="details">
                                            <div class="row detailHeading">
                                                <div class="col-lg-6 col-md-12">
                                                    <h6>Area</h6>
                                                    <h4 style="color:white !important">{!objUnit.Inventory_Area__c} sq.ft</h4>
                                                </div>
                                                <div class="col-lg-6 col-md-12">
                                                    <h6>Price</h6>
                                                    <h4 style="color:white !important">AED {!objUnit.Unit_Selling_Price__c}</h4> <!-- {!objUnit.Unit_Selling_Price__c} -->
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-lg-4 col-sm-4 col-xs-4">
                                                    <div class="infoBoxes">
                                                        <h6>Current Construction Status</h6>
                                                        <h5>60%</h5>
                                                    </div>
                                                </div>
                                                <div class="col-lg-4 col-sm-4 col-xs-4">
                                                    <div class="infoBoxes">
                                                        <h6>Overdue</h6>
                                                        <h5>40%</h5>
                                                    </div>
                                                </div>
                                                <div class="col-lg-4 col-sm-4 col-xs-4">
                                                    <div class="infoBoxes">
                                                        <h6>Total Penalties (Customer)</h6>
                                                        <h5>2</h5>
                                                    </div>
                                                </div>
                                                
                                                <div class="col-lg-4 col-sm-4 col-xs-4">
                                                    <div class="infoBoxes">
                                                        <h6>Area Variation</h6>
                                                        <h5>6%</h5>
                                                    </div>
                                                </div>
                                                <div class="col-lg-4 col-sm-4 col-xs-4">
                                                    <div class="infoBoxes">
                                                        <h6>Any Rebates</h6>
                                                        <h5>2</h5>
                                                    </div>
                                                </div>
                                                <div class="col-lg-4 col-sm-4 col-xs-4">
                                                    <div class="infoBoxes">
                                                        <h6>Original ACD</h6>
                                                        <h5>3%</h5>
                                                    </div>
                                                </div>
                                                <div class="col-lg-4 col-sm-4 col-xs-4">
                                                    <div class="infoBoxes">
                                                        <h6>No. of times customer defaulted on instalments</h6>
                                                        <h5>3</h5>
                                                    </div>
                                                </div>
                                                <div class="col-lg-4 col-sm-4 col-xs-4">
                                                    <div class="infoBoxes">
                                                        <h6>Original Payment Plan Type</h6>
                                                        <h5>B</h5>
                                                    </div>
                                                </div>
                                                <div class="col-lg-4 col-sm-4 col-xs-4">
                                                    <div class="infoBoxes">
                                                        <h6>Current RERA Construction Status</h6>
                                                        <h5>3%</h5>
                                                    </div>
                                                </div>
                                                <div class="col-lg-4 col-sm-4 col-xs-4">
                                                    <div class="infoBoxes">
                                                        <h6>PDC coverage</h6>
                                                        <h5>10%</h5>
                                                    </div>
                                                </div>
                                                <div class="col-lg-4 col-sm-4 col-xs-4">
                                                    <div class="infoBoxes">
                                                        <h6>Previous Waivers (Customer)</h6>
                                                        <h5>2</h5>
                                                    </div>
                                                </div>
                                                <div class="col-lg-4 col-sm-4 col-xs-4">
                                                    <div class="infoBoxes">
                                                        <h6>Recharges</h6>
                                                        <h5>0</h5>
                                                    </div>
                                                </div>
                                                <div class="col-lg-4 col-sm-4 col-xs-4">
                                                    <div class="infoBoxes">
                                                        <h6>Prior AoPT</h6>
                                                        <h5>B</h5>
                                                    </div>
                                                </div>
                                                <div class="col-lg-4 col-sm-4 col-xs-4">
                                                    <div class="infoBoxes">
                                                        <h6>Current ACD</h6>
                                                        <h5>2%</h5>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        </apex:outputpanel>
                                    </div>
                                </div>


                            </div>
                        </section>
                        
                        <apex:outputpanel id="enterDetails" rendered="{!blnSectionOne}"> 
<!--                         <apex:outputpanel id="enterDetails"> -->
                        <section id="">
                            <div class="well">
                                <h4>Enter Details<div class="pull-right">
                                    <apex:commandButton styleclass="btn btn-sm btn-success viewPaymentDetails" 
                                    value="View Payment Details" 
                                    action="{!viewPaymentDetails}"/> <!-- rerender="paymentRepeatId" -->
                                    </div></h4>
                                <div class="row">
                                    <div class="col-lg-6">
                                        <div class="form-group">
                                            <label><span style="color:red">*&nbsp;</span>Buyer Type</label>
                                            <apex:inputField value="{!objCase.Buyer_Type__c}" 
                                            styleClass="form-control buyerType" onchange="validateViewPaymentButton();"/>
                                        </div>

                                    </div>
                                    <div class="col-lg-6">
                                        <div class="form-group">
                                            <label><span style="color:red">*&nbsp;</span>Relationship with Seller</label>
                                            <apex:inputField value="{!objCase.Relationship_with_Seller__c}"
                                                styleClass="form-control relationship" onchange="validateViewPaymentButton();"/>
                                        </div>

                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-lg-6">
                                        <div class="form-group">
                                            <label><span style="color:red">*&nbsp;</span>Case Type</label>
                                            <apex:inputField value="{!objCase.Case_Type__c}" 
                                            styleClass="form-control caseType" onchange="validateViewPaymentButton();"/>
                                        </div>

                                    </div>
<!--                                     <div class="col-lg-6"> -->
<!--                                         <div class="form-group"> -->
<!--                                             <label><span>&nbsp;&nbsp;</span>No. of Joint Buyers</label> -->
<!--                                             <select class="form-control" id="sel1"> -->
<!--                                                 <option>0</option> -->
<!--                                                 <option>1</option> -->
<!--                                                 <option>2</option> -->
<!--                                                 <option>3</option> -->
<!--                                             </select> -->
<!--                                         </div> -->
<!--                                     </div> -->
                                </div>
                            </div>
                        </section>
                        </apex:outputpanel>

                        <apex:outputPanel style="display:block" rendered="{!blnSectionTwo}">
<!--                         <apex:outputPanel style="display:block"> -->
                        <section id="">
                            <div class="well">
                                <h4>
                                    Payment Details
                                </h4>
                                <div class="row">

                                    <div class="col-lg-12">
                                        <table class="paymentDue" width="100%" cellpadding="10">
                                            <thead>
                                                <tr>
                                                    <th>Payment Type</th>
                                                    <th>Amount Due</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <apex:repeat value="{!lstPayments}" var="pay" id="paymentRepeatId">
                                                <tr>
                                                    <td>{!pay.strType}</td>
                                                    <td>AED {!pay.decAmount}</td>
                                                </tr>
                                                </apex:repeat>
                                                <tr>
                                                    <td><b>Total</b></td>
                                                    <td><b>AED {!decTotal}</b></td>
                                                </tr>
     
                                            </tbody>
                                        </table>
                                    </div>
                                </div>

                            </div>
                        </section>
                        
                        
                        <section id="">

                            <div class="well">
                                <div class="row">
                                    <div class="col-lg-6">
                                        <h4>
                                            Enter Seller POA Details
                                        </h4>
                                        <div class="form-group">
                                            <label>Seller POA</label>&nbsp;&nbsp;
                                            <apex:inputField styleClass="sellerPOAChk"
                                                        value="{!objCase.Seller_POA__c}" onchange="togglePOA();"/>
                                        </div>
                                        <div class="form-group spoa">
                                            <label>Name of Attorney</label>
                                            <apex:inputField styleClass="form-control"
                                                        value="{!objCase.POA_Name_Seller__c}"/>
                                        </div>
<!--                                         <div class="form-group"> -->
<!--                                             <label>Relationship with Seller</label> -->
<!--                                             <apex:inputField styleClass="form-control" -->
<!--                                                         value="{!objCase.POA_Relationship_with_Seller__c}" /> -->
<!--                                         </div> -->
                                        <div class="form-group spoa">
                                            <label>Purpose of POA</label>
                                            <apex:inputField styleClass="form-control"
                                                        value="{!objCase.Purpose_of_POA_Seller__c}" />
                                        </div>
                                        <div class="form-group spoa">
                                            <label>Date of Issue</label>
                                            <input type="text" id="sellerDatepicker" class="form-control datepicker sellerPOAExpiry"
                                            onchange="validatePastDate(this);"/>
<!--                                             <apex:inputText styleclass="form-control datepicker sellerPOAExpiry"  -->
<!--                                             value="{!sellerPoaDate}" onchange="validateFutureDate(this);"/> -->
                                        </div>
                                        <div class="form-group spoa">
                                            <label>Issued by (Authority)</label>
                                            <apex:inputField styleClass="form-control"
                                                        value="{!objCase.POA_Issued_By_Seller__c}"/>
                                        </div>
                                        <div class="fileupload fileupload-new spoa" data-provides="fileupload">
                                        <input type="hidden"/>
                                            <span class="btn btn-primary btn-file">
                                                <span class="fileupload-new"><i class="fa fa-address-card-o" aria-hidden="true"></i><br/>Select file</span>
                                                <span class="fileupload-exists"><i class="fa fa-file-pdf-o" aria-hidden="true"></i><br/>Change</span>
<!--                                                 <input type="file"/> -->
                                                <apex:inputFile title="Browse"
                                                        value="{!sellerPOA.body}"
                                                        filename="{!sellerPOA.name}" 
                                                        styleClass="inputFileSellerPOA"/>
                                            </span>
                                            <div>
                                                <span class="fileupload-preview"></span>
                                                <a href="#" class="close fileupload-exists" data-dismiss="fileupload" style="float: none">�</a>
                                            </div>
                                        </div>
                                        <label class="spoa">Upload Power of Attorney</label>
                                    </div>
                                    <div class="col-lg-6">
                                        <h4>
                                            Enter Buyer POA Details
                                        </h4>
                                        <div class="form-group">
                                            <label>Buyer POA</label>&nbsp;&nbsp;
                                            <apex:inputField styleClass="buyerPOAChk"
                                                        value="{!objCase.Buyer_POA__c}" onchange="togglePOA();"/>
                                        </div>
                                        <div class="form-group bpoa">
                                            <label>Name of Attorney</label>
                                            <apex:inputField styleClass="form-control"
                                                        value="{!objCase.POA_Name__c}"/>
                                        </div>
<!--                                         <div class="form-group"> -->
<!--                                             <label>Relationship with Buyer</label> -->
<!--                                             <apex:inputField styleClass="form-control" -->
<!--                                                         value="{!objCase.POA_Relationship_with_Buyer__c}"/> -->
<!--                                         </div> -->
                                        <div class="form-group bpoa">
                                            <label>Purpose of POA</label>
                                            <apex:inputField styleClass="form-control"
                                                        value="{!objCase.Purpose_of_POA__c}" />
                                        </div>
                                        <div class="form-group bpoa">
                                            <label>Date of Issue</label>
                                            <input type="text" class="form-control datepicker buyerPOAExpiry" id="buyerDatepicker"
                                            onchange="validatePastDate(this);"/>
<!--                                             <apex:inputText styleclass="form-control datepicker buyerPOAExpiry"  -->
<!--                                             value="{!buyerPoaDate}" onchange="validateFutureDate(this);"/> -->
                                        </div>
                                        <div class="form-group bpoa">
                                            <label>Issued by (Authority)</label>
                                            <apex:inputField styleClass="form-control"
                                                        value="{!objCase.POA_Issued_By__c}"/>
                                        </div>
                                        
                                        <div class="fileupload fileupload-new bpoa" data-provides="fileupload"><input type="hidden"/>
                                            <span class="btn btn-primary btn-file">
                                                <span class="fileupload-new"><i class="fa fa-address-card-o" aria-hidden="true"></i><br/>Select file</span>
                                                <span class="fileupload-exists"><i class="fa fa-file-pdf-o" aria-hidden="true"></i><br/>Change</span>
                                                <apex:inputFile title="Browse"
                                                        value="{!buyerPOA.body}"
                                                        filename="{!buyerPOA.name}" 
                                                        styleClass="inputFileBuyerPOA"/>
<!--                                                 <input type="file"/> -->
                                            </span>
                                            <div>
                                                <span class="fileupload-preview"></span>
                                                <a href="#" class="close fileupload-exists" data-dismiss="fileupload" style="float: none"></a>
                                            </div>
                                        </div>
                                        <label class="bpoa">Upload Power of Attorney</label>
                                    </div>
                                </div>
                            </div>
                        </section>


                        <section id="">
                            <div class="well">
                                <h4>
                                    Upload Documents<div class="pull-right">
                                    <apex:commandbutton styleclass="btn btn-sm btn-success submitDocuments" 
                                    value="Save as Draft" action="{!submitCRF}"/>
                                    </div>
                                </h4>


                                <div class="row">
                                    <apex:repeat value="{!lstDocs}" var="docs">
                                    <div class="col-lg-4 col-md-6 col-xs-12 text-center">
                                        <div class="fileupload fileupload-new" data-provides="fileupload">
                                        <input type="hidden"/>
                                            <span class="btn btn-primary btn-file">
                                                <span class="fileupload-new"><i class="fa fa-address-card-o" aria-hidden="true"></i><br/>Select file</span>
                                                <span class="fileupload-exists"><i class="fa fa-file-pdf-o" aria-hidden="true"></i><br/>Change</span>
                                                <apex:inputFile title="Browse"
                                                        value="{!docs.objAttachment.body}"
                                                        filename="{!docs.objAttachment.name}" 
                                                        styleClass="inputFile"
                                                        onchange="validateDocumentCompleteness();"/>
                                            </span>
                                            <div>
                                                <span class="fileupload-preview"></span>
                                                <a href="#" class="close fileupload-exists" data-dismiss="fileupload" style="float: none">�</a>
                                            </div>
                                        </div>
                                        <label>{!docs.strType}</label>
                                        <label>Is Valid</label>
                                        <apex:selectList value="{!docs.blnIsValid}"
                                            multiselect="false" size="1" 
                                            styleClass="form-control">
                                            <apex:selectOptions value="{!lstOptions}" />
                                        </apex:selectList>
                                        <br/><br/>
                                    </div>
                                    </apex:repeat>
                                </div>
                            </div>
                            
<!--                             <apex:outputpanel> -->
                            <!--<apex:outputpanel rendered="{!blnSectionAddDocs}">
                            <div class="well">
                                <h4>
                                    Upload Additional Documents<div class="pull-right">
                                    <apex:commandbutton styleclass="btn btn-sm btn-success skip" 
                                    action="{!skipAdditionalDocs}" value="Skip"/>&nbsp;&nbsp;
                                    <apex:commandbutton styleclass="btn btn-sm btn-success additionalDocuments" 
                                    value="Add New Supporting Documents" action="{!addAdditionalDocument}"/>
                                    </div>
                                </h4>

                                <div class="row">
                                    <apex:repeat value="{!lstAdditionalDocs}" var="docs">
                                    <div class="col-lg-4 col-md-6 col-xs-12 text-center">
                                        <div class="fileupload fileupload-new" data-provides="fileupload">
                                        <input type="hidden"/>
                                            <span class="btn btn-primary btn-file">
                                                <span class="fileupload-new"><i class="fa fa-address-card-o" aria-hidden="true"></i><br/>Select file</span>
                                                <span class="fileupload-exists"><i class="fa fa-file-pdf-o" aria-hidden="true"></i><br/>Change</span>
                                                <apex:inputFile title="Browse"
                                                        value="{!docs.objAttachment.body}"
                                                        filename="{!docs.objAttachment.name}" 
                                                        styleClass="additionalInputFile"/>
                                            </span>
                                            <div>
                                                <span class="fileupload-preview"></span>
                                                <a href="#" class="close fileupload-exists" data-dismiss="fileupload" style="float: none">�</a>
                                            </div>
                                        </div>
                                        <label>{!docs.strType}</label>
                                        <br/>
                                        <label>Is Valid</label>
                                        <apex:selectList value="{!docs.blnIsValid}"
                                            multiselect="false" size="1" 
                                            styleClass="form-control">
                                            <apex:selectOptions value="{!lstOptions}" />
                                        </apex:selectList>
                                        <br/><br/>
                                    </div>
                                    </apex:repeat>
                                </div>
                                <div align="right">
                                <apex:commandbutton value="Submit Additional Docs" action="{!insertAdditionalDocument}" 
                                styleclass="btn btn-sm btn-success additionalDocs" rendered="{!AND(NOT(ISNULL(lstAdditionalDocs)),lstAdditionalDocs.size>0)}"/>
                                </div>
                            </div>
                            </apex:outputpanel>-->
                        </section>
                        </apex:outputPanel>
                        
<!--                         <apex:outputPanel> -->
                        <apex:outputPanel rendered="{!blnSectionThree}">
                        <section id="">
                            <div class="well">
                                <h4>
                                    Buyer's Details 
                                    <apex:commandbutton styleclass="btn btn-xs btn-success" value="Add Joint Buyer"
                                    action="{!addJointBuyer}"/>
                                    <div class="pull-right">
                                        <apex:commandbutton styleclass="btn btn-sm btn-success submitCRF" 
                                        value="Submit CRF" action="{!upsertBuyer}" onmouseover="validateBuyerCompleteness();"/>
                                    </div>
                                    
                                </h4>

                                <apex:outputPanel rendered="{!If(objCase.Buyer_Type__c == 'Corporate', true, false)}">
                                <div class="row">
                                    <div class="col-lg-6">
                                        <h5>Enter Organization Details <small>(in english)</small></h5>
                                        <div class="form-group">
                                            <label><span style="color:red">*&nbsp;</span>Organisation Name</label>
                                            <apex:inputField styleclass="form-control organization buyerCompleteness"
                                                value="{!objBuyer.Organisation_Name__c}" onchange="validateBuyerCompleteness();"/>
                                        </div>
                                        <div class="form-group">
                                            <label><span style="color:red">*&nbsp;</span>CR Registration Expiry Date</label>
                                            <apex:inputText styleclass="form-control datepicker crReg buyerCompleteness"
                                            value="{!objBuyer.CR_Registration_Expiry_Date__c}" onchange="validateFutureDate(this);"/>
                                        </div>
                                        <div class="form-group">
                                            <label><span style="color:red">*&nbsp;</span>CR Registration Place</label>
                                            <apex:inputField styleclass="form-control crPlace buyerCompleteness"
                                                value="{!objBuyer.CR_Registration_Place__c}" onchange="validateBuyerCompleteness();"/>
                                        </div>
                                    </div>
                                    <div class="col-lg-6">
                                        <h5>Enter Organization Details <small>(in arabic)</small></h5>
                                        <div class="form-group">
                                            <label><span style="color:red">*&nbsp;</span>Organisation Name (Arabic)</label>
                                            <apex:inputField styleclass="form-control organizationArabic buyerCompleteness"
                                                value="{!objBuyer.Organisation_Name_Arabic__c}" onchange="validateBuyerCompleteness();"/>
                                        </div>
                                        <div class="form-group">
                                            <label><span style="color:red">*&nbsp;</span>CR Number</label>
                                            <apex:inputField styleclass="form-control crNumber buyerCompleteness"
                                                value="{!objBuyer.CR_Number__c}" onchange="validateBuyerCompleteness();"/>
                                        </div>
                                        <div class="form-group">
                                            <label><span style="color:red">*&nbsp;</span>CR Registration Place (Arabic)</label>
                                            <apex:inputField styleclass="form-control crPlaceArabic buyerCompleteness"
                                                value="{!objBuyer.CR_Registration_Place_Arabic__c}" onchange="validateBuyerCompleteness();"/>
                                        </div>
                                    </div>
                                </div>
                                </apex:outputPanel>
                                
                                <div class="row">
                                    <div class="col-lg-6">
                                        <h5>Enter Individual Details <small>(in english)</small></h5>
                                        <div class="form-group">
                                            <label><span style="color:red">*&nbsp;</span>Title</label>
                                            <apex:inputField styleclass="form-control title buyerCompleteness"
                                                value="{!objBuyer.Title__c}" onchange="validateBuyerCompleteness();"/>
                                        </div>
                                        <div class="form-group">
                                            <label><span style="color:red">*&nbsp;</span>First Name</label>
                                            <apex:inputField styleclass="form-control firstName buyerCompleteness"
                                                value="{!objBuyer.First_Name__c}" onchange="validateBuyerCompleteness();"/>
                                        </div>
                                        <div class="form-group">
                                            <label><span style="color:red">*&nbsp;</span>Last Name</label>
                                            <apex:inputField styleclass="form-control lastName buyerCompleteness"
                                                value="{!objBuyer.Last_Name__c}" onchange="validateBuyerCompleteness();"/>
                                        </div>
                                        <div class="form-group">
                                            <label><span style="color:red">*&nbsp;</span>Nationality</label>
                                            <apex:inputField styleclass="form-control nationality buyerCompleteness"
                                                value="{!objBuyer.Nationality__c}" onchange="validateBuyerCompleteness();"/>
                                            <!-- <input type="text" class="form-control" placeholder="Enter nationality"/> -->
                                        </div>
                                        <div class="form-group">
                                            <label><span style="color:red">*&nbsp;</span>Passport No.</label>
                                            <apex:inputField styleClass="form-control buyerCompleteness"
                                                value="{!objBuyer.Passport_Number__c}" onchange="validateBuyerCompleteness();"/>
                                            <!-- <input type="text" class="form-control" placeholder="Enter passport no."/> -->
                                        </div>
                                        
                                        <div class="form-group">
                                            <label><span style="color:red">*&nbsp;</span>Place of Issue</label>
                                            <apex:inputField styleclass="form-control placeOfIssue buyerCompleteness"
                                                value="{!objBuyer.Place_of_Issue__c}" onchange="validateBuyerCompleteness();"/>
                                            <!-- <input type="text" class="form-control"  placeholder="Enter place of issue"/> -->
                                        </div>
                                        <div class="form-group">
                                            <label><span style="color:red">*&nbsp;</span>Address line 1</label>
                                            <apex:inputField styleclass="form-control address01 buyerCompleteness"
                                                value="{!objBuyer.Address_Line_1__c}" onchange="validateBuyerCompleteness();"/>
                                        </div>
                                        <div class="form-group">
                                            <label><span>&nbsp;&nbsp;</span>Address line 2</label>
                                            <apex:inputField styleclass="form-control address02"
                                                value="{!objBuyer.Address_Line_2__c}" />
                                        </div>
                                        <div class="form-group">
                                            <label><span>&nbsp;&nbsp;</span>Address line 3</label>
                                            <apex:inputField styleclass="form-control address03"
                                                value="{!objBuyer.Address_Line_3__c}" />
                                        </div>
                                        <div class="form-group">
                                            <label><span>&nbsp;&nbsp;</span>Address line 4</label>
                                            <apex:inputField styleclass="form-control address04"
                                                value="{!objBuyer.Address_Line_4__c}" />
                                        </div>
                                        <div class="form-group">
                                            <label><span style="color:red">*&nbsp;</span>Country</label>
                                            <apex:inputField styleclass="form-control country buyerCompleteness"
                                                value="{!objBuyer.Country__c}" onchange="validateBuyerCompleteness();"/>
                                        </div>
                                        <div class="form-group">
                                            <label><span style="color:red">*&nbsp;</span>City</label>
                                            <apex:inputField styleclass="form-control city buyerCompleteness"
                                                value="{!objBuyer.City__c}" onchange="validateBuyerCompleteness();"/>
                                        </div>
                                        <div class="form-group">
                                            <label><span style="color:red">*&nbsp;</span>Date of Birth</label>
                                            <apex:inputText styleclass="form-control datepicker dob buyerCompleteness"
                                                 value="{!objBuyer.Date_of_Birth__c}" onchange="validatePastDate(this);"/>
                                        </div>
                                    </div>
                                    <div class="col-lg-6">
                                        <h5>Enter Individual Details <small>(in arabic)</small></h5>
                                        <div class="form-group">
                                            <label><span style="color:red">*&nbsp;</span>Title</label>
                                            <apex:inputField styleclass="form-control arabicTitle buyerCompleteness"
                                                value="{!objBuyer.Title_Arabic__c}" onchange="validateBuyerCompleteness();"/>
                                        </div>
                                        <div class="form-group">
                                            <label><span style="color:red">*&nbsp;</span>First Name <small>(in arabic)</small></label>
                                            <apex:inputField styleclass="form-control arabicFirstName buyerCompleteness"
                                                value="{!objBuyer.First_Name_Arabic__c}" onchange="validateBuyerCompleteness();"/>
                                        </div>
                                        <div class="form-group">
                                            <label><span style="color:red">*&nbsp;</span>Last Name <small>(in arabic)</small></label>
                                            <apex:inputField styleclass="form-control arabicLastName buyerCompleteness"
                                                value="{!objBuyer.Last_Name_Arabic__c}" onchange="validateBuyerCompleteness();"/>
                                        </div>
                                        <div class="form-group">
                                            <label><span style="color:red">*&nbsp;</span>Nationality <small>(in arabic)</small></label>
                                            <apex:inputField styleclass="form-control arabicNationality buyerCompleteness"
                                                value="{!objBuyer.Nationality_Arabic__c}" onchange="validateBuyerCompleteness();"/>
                                        </div>
                                        <div class="form-group">
                                            <label><span style="color:red">*&nbsp;</span>Passport Expiry Date</label>
                                            <apex:inputText styleclass="form-control datepicker passportExpiry buyerCompleteness"
                                            value="{!objBuyer.Passport_Expiry_Date__c}" onchange="validateFutureDate(this);"/>
                                        </div>
                                        <div class="form-group">
                                            <label><span style="color:red">*&nbsp;</span>Place of Issue <small>(in arabic)</small></label>
                                            <apex:inputField styleclass="form-control arabicPlaceOfIssue buyerCompleteness"
                                                value="{!objBuyer.Place_of_Issue_Arabic__c}" onchange="validateBuyerCompleteness();"/>
                                        </div>
                                        <div class="form-group">
                                            <label><span style="color:red">*&nbsp;</span>Address line 1 <small>(in arabic)</small></label>
                                            <apex:inputField styleclass="form-control address01 buyerCompleteness"
                                                value="{!objBuyer.Address_Line_1_Arabic__c}" onchange="validateBuyerCompleteness();"/>
                                        </div>
                                        <div class="form-group">
                                            <label><span>&nbsp;&nbsp;</span>Address line 2 <small>(in arabic)</small></label>
                                            <apex:inputField styleclass="form-control address02"
                                                value="{!objBuyer.Address_Line_2_Arabic__c}" />
                                        </div>
                                        <div class="form-group">
                                            <label><span>&nbsp;&nbsp;</span>Address line 3 <small>(in arabic)</small></label>
                                            <apex:inputField styleclass="form-control address03"
                                                value="{!objBuyer.Address_Line_3_Arabic__c}" />
                                        </div>
                                        <div class="form-group">
                                            <label><span>&nbsp;&nbsp;</span>Address line 4 <small>(in arabic)</small></label>
                                            <apex:inputField styleclass="form-control address04"
                                                value="{!objBuyer.Address_Line_4_Arabic__c}" />
                                        </div>
                                        <div class="form-group">
                                            <label><span style="color:red">*&nbsp;</span>Country <small>(in arabic)</small></label>
                                            <apex:inputField styleclass="form-control arabicCountry buyerCompleteness"
                                                value="{!objBuyer.Country_Arabic__c}" onchange="validateBuyerCompleteness();"/>
                                        </div>
                                        <div class="form-group">
                                            <label><span style="color:red">*&nbsp;</span>City <small>(in arabic)</small></label>
                                            <apex:inputField styleclass="form-control arabicCity buyerCompleteness"
                                                value="{!objBuyer.City_Arabic__c}" onchange="validateBuyerCompleteness();"/>
                                        </div>
                                    </div>


                                </div>
                                <div class="row">
                                    <div class="col-lg-12">
                                        <h5>Contact Details</h5>
                                        <div class="form-group">
                                            <div class="row">
                                                <div class="col-lg-6">
                                                    <label><span style="color:red">*&nbsp;</span>Phone Country Code</label>
                                                       <apex:inputField styleclass="form-control phonecountry buyerCompleteness"
                                                                value="{!objBuyer.Phone_Country_Code__c}" onchange="validateBuyerCompleteness();"/>
                                                </div>
                                                <div class="col-lg-6">
                                                    <div class="form-group">
                                                        <label><span style="color:red">*&nbsp;</span>Phone No.</label>
                                                        <apex:inputField styleclass="form-control phone buyerCompleteness"
                                                            value="{!objBuyer.Phone__c}" onkeyup="validatePhoneNumber(this);"/>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-lg-6">
                                                    <div class="form-group">
                                                        <label><span style="color:red">*&nbsp;</span>Email</label>
                                                        <apex:inputField styleclass="form-control email buyerCompleteness"
                                                            value="{!objBuyer.Email__c}" 
                                                            onkeyup="validateEmail(this);"/>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </section>
                        
                        </apex:outputpanel>
                        <apex:repeat value="{!lstJointBuyer}" var="jb">
                            <section id="">
                            <div class="well">
                                <h4>
                                    Joint Buyer's Details
                                    <apex:commandbutton styleclass="btn btn-xs btn-success" value="Add Joint Buyer"
                                    action="{!addJointBuyer}" oncomplete="addBuyerResetStyle();"/>&nbsp;&nbsp;
                                    <apex:commandlink styleclass="btn btn-xs btn-danger" value="Remove Joint Buyer"
                                    action="{!removeJointBuyer}">
                                    <apex:param name="delIndex" value="{!jb.intIndex}" assignTo="{!intDelIndex}"/>
                                    </apex:commandlink>
                                    
                                </h4>

                                <apex:outputPanel rendered="{!If(objCase.Buyer_Type__c == 'Corporate', true, false)}">
                                <div class="row">
                                    <div class="col-lg-6">
                                        <h5>Enter Organization Details <small>(in english)</small></h5>
                                        <div class="form-group">
                                            <label><span style="color:red">*&nbsp;</span>Organisation Name</label>
                                            <apex:inputField styleclass="form-control organization buyerCompleteness"
                                                value="{!jb.objJointBuyer.Organisation_Name__c}" onchange="validateBuyerCompleteness();"/>
                                        </div>
                                        <div class="form-group">
                                            <label><span style="color:red">*&nbsp;</span>CR Registration Expiry Date</label>
                                            <apex:inputText styleclass="form-control datepicker crReg buyerCompleteness"
                                            value="{!jb.objJointBuyer.CR_Registration_Expiry_Date__c}" onchange="validateFutureDate(this);"/>
                                        </div>
                                        <div class="form-group">
                                            <label><span style="color:red">*&nbsp;</span>CR Registration Place</label>
                                            <apex:inputField styleclass="form-control crPlace buyerCompleteness"
                                                value="{!jb.objJointBuyer.CR_Registration_Place__c}" onchange="validateBuyerCompleteness();"/>
                                        </div>
                                    </div>
                                    <div class="col-lg-6">
                                        <h5>Enter Organization Details <small>(in arabic)</small></h5>
                                        <div class="form-group">
                                            <label><span style="color:red">*&nbsp;</span>Organisation Name (Arabic)</label>
                                            <apex:inputField styleclass="form-control organizationArabic buyerCompleteness"
                                                value="{!jb.objJointBuyer.Organisation_Name_Arabic__c}" onchange="validateBuyerCompleteness();"/>
                                        </div>
                                        <div class="form-group">
                                            <label><span style="color:red">*&nbsp;</span>CR Number</label>
                                            <apex:inputField styleclass="form-control crNumber buyerCompleteness"
                                                value="{!jb.objJointBuyer.CR_Number__c}" onchange="validateBuyerCompleteness();"/>
                                        </div>
                                        <div class="form-group">
                                            <label><span style="color:red">*&nbsp;</span>CR Registration Place (Arabic)</label>
                                            <apex:inputField styleclass="form-control crPlaceArabic buyerCompleteness"
                                                value="{!jb.objJointBuyer.CR_Registration_Place_Arabic__c}" onchange="validateBuyerCompleteness();"/>
                                        </div>
                                    </div>
                                </div>
                                </apex:outputPanel>
                                
                                <div class="row">
                                    <div class="col-lg-6">
                                        <h5>Enter Individual Details <small>(in english)</small></h5>
                                        <div class="form-group">
                                            <label><span style="color:red">*&nbsp;</span>Title</label>
                                            <apex:inputField styleclass="form-control title buyerCompleteness"
                                                value="{!jb.objJointBuyer.Title__c}" onchange="validateBuyerCompleteness();"/>
                                        </div>
                                        <div class="form-group">
                                            <label><span style="color:red">*&nbsp;</span>First Name</label>
                                            <apex:inputField styleclass="form-control firstName buyerCompleteness"
                                                value="{!jb.objJointBuyer.First_Name__c}" onchange="validateBuyerCompleteness();"/>
                                        </div>
                                        <div class="form-group">
                                            <label><span style="color:red">*&nbsp;</span>Last Name</label>
                                            <apex:inputField styleclass="form-control lastName buyerCompleteness"
                                                value="{!jb.objJointBuyer.Last_Name__c}" onchange="validateBuyerCompleteness();"/>
                                        </div>
                                        <div class="form-group">
                                            <label><span style="color:red">*&nbsp;</span>Nationality</label>
                                            <apex:inputField styleclass="form-control nationality buyerCompleteness"
                                                value="{!jb.objJointBuyer.Nationality__c}" onchange="validateBuyerCompleteness();"/>
                                            <!-- <input type="text" class="form-control" placeholder="Enter nationality"/> -->
                                        </div>
                                        <div class="form-group">
                                            <label><span style="color:red">*&nbsp;</span>Passport No.</label>
                                            <apex:inputField styleClass="form-control buyerCompleteness"
                                                value="{!jb.objJointBuyer.Passport_Number__c}" onchange="validateBuyerCompleteness();"/>
                                            <!-- <input type="text" class="form-control" placeholder="Enter passport no."/> -->
                                        </div>
                                        
                                        <div class="form-group">
                                            <label><span style="color:red">*&nbsp;</span>Place of Issue</label>
                                            <apex:inputField styleclass="form-control placeOfIssue buyerCompleteness"
                                                value="{!jb.objJointBuyer.Place_of_Issue__c}" onchange="validateBuyerCompleteness();"/>
                                            <!-- <input type="text" class="form-control"  placeholder="Enter place of issue"/> -->
                                        </div>
                                        <div class="form-group">
                                            <label><span style="color:red">*&nbsp;</span>Address line 1</label>
                                            <apex:inputField styleclass="form-control address01 buyerCompleteness"
                                                value="{!jb.objJointBuyer.Address_Line_1__c}" onchange="validateBuyerCompleteness();"/>
                                        </div>
                                        <div class="form-group">
                                            <label><span>&nbsp;&nbsp;</span>Address line 2</label>
                                            <apex:inputField styleclass="form-control address02"
                                                value="{!jb.objJointBuyer.Address_Line_2__c}" />
                                        </div>
                                        <div class="form-group">
                                            <label><span>&nbsp;&nbsp;</span>Address line 3</label>
                                            <apex:inputField styleclass="form-control address03"
                                                value="{!jb.objJointBuyer.Address_Line_3__c}" />
                                        </div>
                                        <div class="form-group">
                                            <label><span>&nbsp;&nbsp;</span>Address line 4</label>
                                            <apex:inputField styleclass="form-control address04"
                                                value="{!jb.objJointBuyer.Address_Line_4__c}" />
                                        </div>
                                        <div class="form-group">
                                            <label><span style="color:red">*&nbsp;</span>Country</label>
                                            <apex:inputField styleclass="form-control country buyerCompleteness"
                                                value="{!jb.objJointBuyer.Country__c}" onchange="validateBuyerCompleteness();"/>
                                        </div>
                                        <div class="form-group">
                                            <label><span style="color:red">*&nbsp;</span>City</label>
                                            <apex:inputField styleclass="form-control jbcity buyerCompleteness" id="jbcity" 
                                                value="{!jb.objJointBuyer.City__c}" onchange="validateBuyerCompleteness();"/>
                                        </div>
                                        <div class="form-group">
                                            <label><span style="color:red">*&nbsp;</span>Date of Birth</label>
                                            <apex:inputText styleclass="form-control datepicker dob buyerCompleteness"
                                                 value="{!jb.objJointBuyer.Date_of_Birth__c}" onchange="validatePastDate(this);"/>
                                        </div>
                                    </div>
                                    <div class="col-lg-6">
                                        <h5>Enter Individual Details <small>(in arabic)</small></h5>
                                        <div class="form-group">
                                            <label><span style="color:red">*&nbsp;</span>Title</label>
                                            <apex:inputField styleclass="form-control arabicTitle buyerCompleteness"
                                                value="{!jb.objJointBuyer.Title_Arabic__c}" onchange="validateBuyerCompleteness();"/>
                                        </div>
                                        <div class="form-group">
                                            <label><span style="color:red">*&nbsp;</span>First Name <small>(in arabic)</small></label>
                                            <apex:inputField styleclass="form-control arabicFirstName buyerCompleteness"
                                                value="{!jb.objJointBuyer.First_Name_Arabic__c}" onchange="validateBuyerCompleteness();"/>
                                        </div>
                                        <div class="form-group">
                                            <label><span style="color:red">*&nbsp;</span>Last Name <small>(in arabic)</small></label>
                                            <apex:inputField styleclass="form-control arabicLastName buyerCompleteness"
                                                value="{!jb.objJointBuyer.Last_Name_Arabic__c}" onchange="validateBuyerCompleteness();"/>
                                        </div>
                                        <div class="form-group">
                                            <label><span style="color:red">*&nbsp;</span>Nationality <small>(in arabic)</small></label>
                                            <apex:inputField styleclass="form-control arabicNationality buyerCompleteness"
                                                value="{!jb.objJointBuyer.Nationality_Arabic__c}" onchange="validateBuyerCompleteness();"/>
                                        </div>
                                        <div class="form-group">
                                            <label><span style="color:red">*&nbsp;</span>Passport Expiry Date</label>
                                            <apex:inputText styleclass="form-control datepicker passportExpiry buyerCompleteness"
                                            value="{!jb.objJointBuyer.Passport_Expiry_Date__c}" onchange="validateFutureDate(this);"/>
                                        </div>
                                        <div class="form-group">
                                            <label><span style="color:red">*&nbsp;</span>Place of Issue <small>(in arabic)</small></label>
                                            <apex:inputField styleclass="form-control arabicPlaceOfIssue buyerCompleteness"
                                                value="{!jb.objJointBuyer.Place_of_Issue_Arabic__c}" onchange="validateBuyerCompleteness();"/>
                                        </div>
                                        <div class="form-group">
                                            <label><span style="color:red">*&nbsp;</span>Address line 1 <small>(in arabic)</small></label>
                                            <apex:inputField styleclass="form-control address01 buyerCompleteness"
                                                value="{!jb.objJointBuyer.Address_Line_1_Arabic__c}" onchange="validateBuyerCompleteness();"/>
                                        </div>
                                        <div class="form-group">
                                            <label><span>&nbsp;&nbsp;</span>Address line 2 <small>(in arabic)</small></label>
                                            <apex:inputField styleclass="form-control address02"
                                                value="{!jb.objJointBuyer.Address_Line_2_Arabic__c}" />
                                        </div>
                                        <div class="form-group">
                                            <label><span>&nbsp;&nbsp;</span>Address line 3 <small>(in arabic)</small></label>
                                            <apex:inputField styleclass="form-control address03"
                                                value="{!jb.objJointBuyer.Address_Line_3_Arabic__c}" />
                                        </div>
                                        <div class="form-group">
                                            <label><span>&nbsp;&nbsp;</span>Address line 4 <small>(in arabic)</small></label>
                                            <apex:inputField styleclass="form-control address04"
                                                value="{!jb.objJointBuyer.Address_Line_4_Arabic__c}" />
                                        </div>
                                        <div class="form-group">
                                            <label><span style="color:red">*&nbsp;</span>Country <small>(in arabic)</small></label>
                                            <apex:inputField styleclass="form-control arabicCountry buyerCompleteness"
                                                value="{!jb.objJointBuyer.Country_Arabic__c}" onchange="validateBuyerCompleteness();"/>
                                        </div>
                                        <div class="form-group">
                                            <label><span style="color:red">*&nbsp;</span>City <small>(in arabic)</small></label>
                                            <apex:inputField styleclass="form-control arabicCity buyerCompleteness"
                                                value="{!jb.objJointBuyer.City_Arabic__c}" onchange="validateBuyerCompleteness();"/>
                                        </div>
                                    </div>


                                </div>
                                <div class="row">
                                    <div class="col-lg-12">
                                        <h5>Contact Details</h5>
                                        <div class="form-group">
                                            <div class="row">
                                                <div class="col-lg-6">
                                                    <label><span style="color:red">*&nbsp;</span>Phone Country Code</label>
                                                       <apex:inputField styleclass="form-control phonecountry buyerCompleteness"
                                                                value="{!jb.objJointBuyer.Phone_Country_Code__c}" onchange="validateBuyerCompleteness();"/>
                                                </div>
                                                <div class="col-lg-6">
                                                    <div class="form-group">
                                                        <label><span style="color:red">*&nbsp;</span>Phone No.</label>
                                                        <apex:inputField styleclass="form-control phone buyerCompleteness"
                                                            value="{!jb.objJointBuyer.Phone__c}" onkeyup="validatePhoneNumber(this);"/>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-lg-6">
                                                    <div class="form-group">
                                                        <label><span style="color:red">*&nbsp;</span>Email</label>
                                                        <apex:inputField styleclass="form-control email buyerCompleteness"
                                                            value="{!jb.objJointBuyer.Email__c}" 
                                                            onkeyup="validateEmail(this);"/>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </section>
                        </apex:repeat>
                        <apex:outputPanel rendered="{!blnSectionFour}">
                        <section id="">
                            <div class="well">
                                <h4>
                                    Upload CRF 
                                    <div class="pull-right">
                                        <apex:commandbutton styleclass="btn btn-sm btn-success generateLOA" 
                                        value="Generate LOA" action="{!generateLOA}"/>&nbsp;&nbsp;
<!--                                         <apex:commandbutton styleclass="btn btn-sm btn-success viewSR"  -->
<!--                                         value="View CRF" action="{!viewCRF}"/> -->
                                        <apex:commandLink styleclass="btn btn-sm btn-success viewSR" value="View CRF" onclick="openInNewTab();" />
                                    </div>
                                </h4>
                                
                                
                                <div class="row">
                                    <div class="col-lg-12 col-md-6 col-xs-12 text-center">
                                        <div class="fileupload fileupload-new" data-provides="fileupload"><input type="hidden"/>
                                            <span class="btn btn-primary btn-file">
                                                <span class="fileupload-new"><i class="fa fa-address-card-o" aria-hidden="true"></i><br/>Select file</span>
                                                <span class="fileupload-exists"><i class="fa fa-file-pdf-o" aria-hidden="true"></i><br/>Change</span>
                                                <apex:inputFile title="Browse"
                                                        value="{!signedCRF.body}"
                                                        filename="{!signedCRF.name}" 
                                                        styleClass="inputFileSignedCRF"
                                                        onchange="enableGenerateLOA();"/>
                                            </span>
                                            <div>
                                                <span class="fileupload-preview"></span>
                                                <a href="#" class="close fileupload-exists" data-dismiss="fileupload" style="float: none">�</a>
                                            </div>
                                        </div>
                                        <label>Upload Signed CRF</label>
                                    </div>
                                </div>
                            </div>
                        </section>
                        </apex:outputPanel>
                        <apex:outputPanel rendered="{!blnSectionFive}">
                        <section id="">
                            <div class="well">
                                <h4>
                                    Upload Documents 
                                    <div class="pull-right">
                                        <apex:commandbutton styleclass="btn btn-sm btn-success printNOC" 
                                        value="Submit SR" action="{!printNOC}"/>
                                    </div>
                                </h4>
                                
                                
                                <div class="row">
                                
                                    <apex:repeat value="{!lstDocsNOC}" var="docs">
                                        <div class="col-lg-4 col-md-6 col-xs-12 text-center">
                                            <div class="fileupload fileupload-new" data-provides="fileupload">
                                            <input type="hidden"/>
                                                <span class="btn btn-primary btn-file"> 
                                                    <span class="fileupload-new"><i class="fa fa-address-card-o" aria-hidden="true"></i><br/>Select file</span>
                                                    <span class="fileupload-exists"><i class="fa fa-file-pdf-o" aria-hidden="true"></i><br/>Change</span>
                                                    <apex:inputFile title="Browse"
                                                            value="{!docs.objAttachment.body}"
                                                            filename="{!docs.objAttachment.name}" 
                                                            styleClass="inputFileNOC"
                                                            onchange="validateDocumentCompletenessNOC();"/>
                                                </span>
                                                <div>
                                                    <span class="fileupload-preview"></span>
                                                    <a href="#" class="close fileupload-exists" data-dismiss="fileupload" style="float: none">×</a>
                                                </div>
                                            </div>
                                            <label>{!docs.strType}</label>
                                        </div>
                                    </apex:repeat>
                                
                                </div>
                            </div>
                        </section>
                        </apex:outputPanel>
                    </div>
                    <!----------------------------------Sidebar Fixed---------------------------------------->
                    <div class="col-md-4">
                        <div class="well sideBarFixed profileDisplay">
                            <apex:image url="{!URLFOR($Resource.PortalAssets, 'assets/img/customer1.jpg')}" width="100px;" height="100px;" />
                            <h6>#CD - 3214DSA</h6>
                            <h4 align="center">{!objSeller.Salutation} {!objSeller.FirstName} {!objSeller.LastName}</h4>
                            <span>
                                <i class="fa fa-star" aria-hidden="true"></i>
                                <i class="fa fa-star" aria-hidden="true"></i>
                                <i class="fa fa-star" aria-hidden="true"></i>
                                <i class="fa fa-star" aria-hidden="true"></i>
                                <i class="fa fa-star" aria-hidden="true"></i>                               
                            </span>
                            <label><a href="">View Portfolio</a></label>
                            <h6>Organization Name</h6>
                            <label>Damac</label>

                            <h6>Contact Details</h6>
                            <label>{!objSeller.PersonMobilePhone}</label>

                            <h6>Email</h6>
                            <label>{!objSeller.PersonEmail}</label>

                            <h6>POA</h6>
                            <label>Bob Woolmer</label>

                            <h6>Nationality</h6>
                            <label>{!objSeller.Nationality__pc}</label>

                            <h6>Party Type</h6>
                            <label>Value</label>

                            <h6>Customer Classification</h6>
                            <label>A++</label>

                            <h6>Bulk</h6>
                            <label>Value</label>

                            <h6>Joint Buyer</h6>
                            <label><a href="" class="btn btn-sm">Raymond Wejes</a></label>
                        </div>
                    </div>
                </div>

            </div>

        </section>
    
    </apex:form>
    <apex:includeScript value="{!URLFOR($Resource.PortalAssets, '/assets/js/jquery.js')}" />
    <apex:includeScript value="{!URLFOR($Resource.PortalAssets, '/assets/js/main.js')}" />
    <apex:includeScript value="{!URLFOR($Resource.PortalAssets, '/assets/js/bootstrap.min.js')}" />
    <apex:includeScript value="{!URLFOR($Resource.PortalAssets, '/assets/js/bootstrap-datepicker.min.js')}" />
    <apex:includeScript value="{!URLFOR($Resource.PortalAssets, '/assets/js/bootstrap-multiselect.js')}" />
    <apex:includeScript value="{!URLFOR($Resource.PortalAssets, '/assets/js/chosen.jquery.js')}" />
    <apex:includeScript value="{!URLFOR($Resource.PortalAssets, '/assets/js/ease.js')}" />
    <apex:includeScript value="{!URLFOR($Resource.PortalAssets, '/assets/js/fileinput.min.js')}" />
<!--    <apex:includeScript -->
<!--        value="{!URLFOR($Resource.PortalAssets, '/assets/js/steps.js')}" /> -->
    <apex:includeScript value="{!URLFOR($Resource.PortalAssets, '/assets/js/upload.js')}" />

</body>
<script>
    $(document).ready(function(){
        console.log('ready called***************');
        bindEvents();
        addBuyerResetStyle();
        validateViewPaymentButton();
        $('.submitDocuments').attr('disabled','disabled');
        $('.submitCRF').attr('disabled','disabled');
        $('.generateLOA').attr('disabled','disabled');
        $('.printNOC').attr('disabled','disabled');
        togglePOA();
    });
    
    function togglePOA(){
        if($(".buyerPOAChk").is(":checked") == false){
            $('.bpoa').hide();
        }else{
            $('.bpoa').show();
        }
        if($(".sellerPOAChk").is(":checked") == false){
            $('.spoa').hide();
        }else{
            $('.spoa').show();
        }
    }
    
    function validateViewPaymentButton(){
        var selectedBuyerType = $('.buyerType').val();
        var selectedRelationship = $('.relationship').val();
        var selectedCaseType = $('.caseType').val();
        var selectedUnit = $('.units').val();
        console.log('selectedUnit***********'+selectedUnit);
        if(selectedUnit != undefined && selectedUnit != 'None'
        && selectedBuyerType != undefined && selectedBuyerType != ''
        && selectedRelationship != undefined && selectedRelationship != ''
        && selectedCaseType != undefined && selectedCaseType != ''){
            $('.viewPaymentDetails').removeAttr('disabled');
        }else{
            $('.viewPaymentDetails').attr('disabled','disabled');
        }
    }
    
    function validateDocumentCompleteness(){
        $('.inputFile').each(function(){
            if($(this).val().trim() != undefined && $(this).val().trim() != ''){
                $('.submitDocuments').removeAttr('disabled');
            }else{
                $('.submitDocuments').attr('disabled','disabled');
                return false;
            }
        });
    }
    
    function validateDocumentCompletenessNOC(){
        $('.inputFileNOC').each(function(){
            if($(this).val().trim() != undefined && $(this).val().trim() != ''){
                $('.printNOC').removeAttr('disabled');
            }else{
                $('.printNOC').attr('disabled','disabled');
                return false;
            }
        });
    }
    
    function enableGenerateLOA(){
        if($('.inputFileSignedCRF').val().trim() != undefined 
        && $('.inputFileSignedCRF').val().trim() != ''){
            $('.generateLOA').removeAttr('disabled');
        }else{
            $('.generateLOA').attr('disabled','disabled');
        }
    }
    
    function enablePrintNOC(){
        if($('.inputFileUploadLOA').val().trim() != undefined 
        && $('.inputFileUploadLOA').val().trim() != ''){
            $('.printNOC').removeAttr('disabled');
        }else{
            $('.printNOC').attr('disabled','disabled');
        }
    }
    
    function bindEvents() {
        $('.datepicker').datepicker({ 
            format: 'dd/mm/yyyy',
            autoclose: true,
            changeMonth: true,
            changeYear: true
        });
    }
    
    function validateBuyerCompleteness(){
        var jbSize = {!lstJointBuyer.size}+1;
        if(jbSize>1){
            var individualLimit = (22*jbSize)-(jbSize-1);
            var corporateLimit = (28*jbSize)-(jbSize-1);
        }else{
            var individualLimit = 22*jbSize;
            var corporateLimit = 28*jbSize;
        }
        
        console.log('individualLimit***********'+individualLimit);
        console.log('corporateLimit***********'+corporateLimit);
        var count = 0;
        var selectedBuyerType = $('.buyerType').val();
        $('.buyerCompleteness').each(function(){
            if($(this).val().trim() != undefined 
            && $(this).val().trim() != ''){
                count++;
                if((selectedBuyerType == 'Individual' && count == individualLimit)
                || (selectedBuyerType == 'Corporate' && count == corporateLimit)){
                    $('.submitCRF').removeAttr('disabled');
                }else{
                    $('.submitCRF').attr('disabled','disabled');
                }
            }
        });
        console.log('count***********'+count);
    }
    
    function validateEmail(event){
        var emailaddress = $(event).val().trim();
        var regex = /^[a-zA-Z0-9]{1,20}[._]?[a-zA-Z0-9]{1,20}[@]{1}[a-zA-Z]{1,20}[.]{1}([a-zA-Z]{3,20}|[a-zA-Z]{2}.[a-zA-Z]{2,20})$/;
        var blnValue = regex.test(emailaddress);
        errorBorder(blnValue , event);
    }
    
    function validatePhoneNumber(event){
        var phoneNumber = $(event).val().trim();
        var regex = /^[1-9]{1}[0-9]*$/;
        var blnValue = regex.test(phoneNumber);
        errorBorder(blnValue , event);
    }
    
    function errorBorder(blnValue, event){
        if(blnValue){
            console.log('blnValue was true*******'+blnValue);
            $(event).css("border", "");
            validateBuyerCompleteness();
        }else{
            console.log('blnValue was false*******'+blnValue);
            $(event).css("border", "2px solid red");
            $('.submitCRF').attr('disabled','disabled');
        }
    }
    
    function validateFutureDate(event){
        var isFuture = compareDate($(event).val());
        if(isFuture == 'true' || isFuture == true){
            errorBorder(true , event);
            validateBuyerCompleteness();
        }else{
            errorBorder(false , event);
        }
    }
    
    function validatePastDate(event){
        var isFuture = compareDate($(event).val());
        if(isFuture == 'false' || isFuture == false){
            errorBorder(true , event);
            validateBuyerCompleteness();
        }else{
            errorBorder(false , event);
        }
    }
    
    function compareDate(dateVal){
        var isFutureDate = false;
        var expireDateArr = dateVal.split("/");
        console.log('expireDateArr******'+expireDateArr);
        console.log('expireDateArr[0] Date*****'+expireDateArr[0]);
        console.log('expireDateArr[1] Month*****'+expireDateArr[1]);
        console.log('expireDateArr[2] Year*****'+expireDateArr[2]);
        var expireDate = new Date(expireDateArr[2], expireDateArr[1]-1, expireDateArr[0]);
        console.log('expireDate***********'+expireDate);
        var todayDate = new Date();
        console.log('todayDate***********'+todayDate);
        if (todayDate < expireDate){
            console.log('selected date is greater than today***********');
            isFutureDate = true;
        }
        return isFutureDate;
    }
    
    function addBuyerResetStyle(){
        console.log('reset called**************');
        $('[id$=jbcity]').addClass("form-control");
    }
    
    function openInNewTab(){
     var url = '/apex/CRF?Id={!objCase.Id}&recTypeName=Assignment';
     window.open(url,'_blank');
    }
</script>
</html>
</apex:component>